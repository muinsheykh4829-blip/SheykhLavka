# API Documentation - Sheykh Lavka Backend

Base URL: `http://127.0.0.1:8000/api/v1`

## Аутентификация

### 1. Регистрация
**POST** `/auth/register`

**Тело запроса:**
```json
{
    "name": "Имя пользователя",
    "phone": "+998901234567",
    "password": "password123",
    "password_confirmation": "password123"
}
```

**Успешный ответ:**
```json
{
    "success": true,
    "message": "Пользователь создан. Подтвердите номер телефона.",
    "data": {
        "user_id": 1,
        "verification_code": "123456"
    }
}
```

**⚠️ Режим разработки:** 
- Код подтверждения всегда: **123456**
- В ответе возвращается код только для удобства тестирования
- В продакшене код будет отправлен по SMS и не возвращаться в ответе

### 2. Подтверждение кода
**POST** `/auth/verify-code`

**Тело запроса:**
```json
{
    "user_id": 1,
    "code": "123456"
}
```

**⚠️ Режим разработки:** 
- Для всех пользователей используется фиксированный код: **123456**
- В продакшене будут генерироваться случайные коды и отправляться по SMS

**Успешный ответ:**
```json
{
    "success": true,
    "message": "Номер телефона подтвержден",
    "data": {
        "user": {
            "id": 1,
            "name": "Имя пользователя",
            "phone": "+998901234567"
        },
        "token": "1|laravel_sanctum_token..."
    }
}
```

### 3. Вход
**POST** `/auth/login`

**Тело запроса:**
```json
{
    "phone": "+998901234567",
    "password": "password123"
}
```

### 4. Выход
**POST** `/auth/logout`
**Заголовки:** `Authorization: Bearer {token}`

## Категории

### Получить все категории
**GET** `/categories`

**Ответ:**
```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "name": "Fruits",
            "name_ru": "Фрукты",
            "slug": "fruits",
            "icon": "fruits.png",
            "is_active": true
        }
    ]
}
```

## Товары

### Получить товары
**GET** `/products?category_id=1&search=apple&page=1`

### Получить товар по ID
**GET** `/products/{id}`

## Баннеры

### Получить активные баннеры
**GET** `/banners`

## Защищенные маршруты (требуют токен)

### Корзина
- **GET** `/cart` - получить корзину
- **POST** `/cart` - добавить товар
- **PUT** `/cart/{id}` - обновить количество
- **DELETE** `/cart/{id}` - удалить товар

### Заказы
- **GET** `/orders` - получить заказы пользователя
- **POST** `/orders` - создать заказ
- **GET** `/orders/{id}` - получить заказ по ID

### Адреса
- **GET** `/addresses` - получить адреса
- **POST** `/addresses` - создать адрес
- **PUT** `/addresses/{id}` - обновить адрес
- **DELETE** `/addresses/{id}` - удалить адрес

### Профиль
- **GET** `/profile` - получить профиль
- **PUT** `/profile` - обновить профиль

## Коды ошибок

- `400` - Неверный запрос
- `401` - Не авторизован
- `404` - Не найдено
- `422` - Ошибка валидации
- `500` - Внутренняя ошибка сервера

## Заголовки для всех запросов

```
Content-Type: application/json
Accept: application/json
Authorization: Bearer {token} // для защищенных маршрутов
```
